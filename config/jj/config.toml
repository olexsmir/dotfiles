#:schema https://jj-vcs.github.io/jj/latest/config-schema.json

[user]
name = "Oleksandr Smirnov"
email = "olexsmir@gmail.com"

[ui]
default-command = "l"
editor = "nvim"
pager = "delta"
diff-editor = ":builtin"
diff-formatter = ":git"

[signing]
backend = "ssh"
key = "~/.ssh/id_ed25519.pub"

[git]
sign-on-push = true
auto-local-bookmark = true

[aliases]
l = ["log", "-r", "ancestors(reachable(@, mutable()), 2)"]
tug = ["bookmark", "move", "--from", "heads(::@- & bookmarks())", "--to", "@-"]

[templates]
draft_commit_description = '''
concat(
  coalesce(description, default_commit_description, "\n"),
  "JJ: ignore-rest\n",
  diff.git(),
)
'''

[template-aliases]
"format_timestamp(timestamp)" = "timestamp.ago()"

[fix.tools.stylua]
command = ["stylua", "-"]
patterns = ["glob:'**/*.lua'"]

[fix.tools.gofumpt]
command = ["gofumpt"]
patterns = ["glob:'**/*.go'"]

[fix.tools.gleam]
command = ["gleam", "format", "--stdin"]
patterns = ["glob:'**/*.gleam'"]

[fix.tools.shfmt]
command = ["shfmt"]
patterns = ["glob:'**/*.sh'"]
